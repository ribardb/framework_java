<html xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8" /><META NAME="save" CONTENT="history" /><title>Configuration du client pour le chiffrement SSL</title><meta name="Language" content="fr-fr" /><meta name="System.Keywords" content="certificat" /><meta name="System.Keywords" content="configuration du certificat SSL" /><meta name="System.Keywords" content="SSL" /><meta name="System.Keywords" content="certificat SSL" /><meta name="Microsoft.Help.Id" content="ae34cd1f-3569-4759-80c7-7c9b33b3e9eb" /><meta name="Description" content="Le Pilote JDBC Microsoft pour SQL Server (ou le client) doit s'assurer que le serveur est le serveur approprié et que son certificat est émis par une autorité de certification approuvée par le client." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><link rel="stylesheet" type="text/css" href="../local/Classic.css" /><script type="text/javascript" src="../scripts/EventUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/SplitScreen.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/Dropdown.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_manifold.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_feedBack.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CheckboxMenu.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CommonUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../local/script_main.js">&amp;nbsp;</script></head><body><div id="header"><table id="bottomTable" cellpadding="0" cellspacing="0"><tr><td align="left"><span id="headerBold">Configuration du client pour le chiffrement SSL</span></td></tr></table><table id="gradientTable"><tr><td class="nsrBottom" background="../icons/gradient.gif" /></tr></table></div><div id="mainSection"><div id="mainBody"><div class="introduction"><p>Le Pilote JDBC Microsoft pour SQL Server (ou le client) doit s'assurer que le serveur est le serveur approprié et que son certificat est émis par une autorité de certification approuvée par le client. Pour valider le certificat de serveur, les informations d'approbation doivent être fournies au moment de la connexion. De plus, l'émetteur du certificat de serveur doit être une autorité de certification approuvée par le client.</p><p>Cette rubrique décrit tout d'abord comment fournir les informations d'approbation dans l'ordinateur client. Ensuite, la rubrique décrit comment importer un certificat de serveur vers le magasin d'approbations de l'ordinateur client lorsque l'instance du certificat SSL (Secure Sockets Layer) de l'ordinateur SQL Server est publiée par une autorité de certification privée.</p><p>Pour plus d'informations sur la validation du certificat de serveur, consultez la section Validation du certificat SSL de serveur dans <span sdata="link"><a href="073f3b9e-8edd-4815-88ea-de0655d0325e.htm">Fonctionnement de la prise en charge SSL</a></span>.</p></div><h1 class="heading">Configuration du magasin d'approbations du client</h1><div id="sectionSection0" class="section" name="collapseableSection" style=""><p>La validation du certificat de serveur requiert que les informations d'approbation soient fournies au moment de la connexion en utilisant les propriétés de connexion <span class="label">trustStore</span> et <span class="label">trustStorePassword</span> de manière explicite ou en utilisant le magasin d'approbations par défaut de la machine virtuelle Java (JVM) sous-jacente de manière implicite. Pour plus d'informations sur la définition des propriétés <span class="label">trustStore</span> et <span class="label">trustStorePassword</span> dans une chaîne de connexion, consultez <span sdata="link"><a href="ec91fa8a-ab7e-4c1e-a05a-d7951ddf33b1.htm">Connexion avec le chiffrement SSL</a></span>.</p><p>Si la propriété <span class="label">trustStore</span> n'est pas spécifiée ou a la valeur null, le Pilote JDBC Microsoft pour SQL Server se fiera au fournisseur de sécurité de la machine virtuelle Java sous-jacente, l'extension SunJSSE (Java Secure Socket Extension). Le fournisseur SunJSSE fournit un <b>TrustManager</b> par défaut, utilisé pour valider les certificats X.509 retournés par SQL Server par rapport aux informations d'approbation fournies dans un magasin d'approbations.</p><p>Le <b>TrustManager</b> essaie de localiser le trustStore par défaut dans l'ordre de recherche suivant :</p><ul><li><p>Si le propriété système « javax.net.ssl.trustStore » est définie, le <b>TrustManager</b> essaie de rechercher le fichier trustStore par défaut en utilisant le nom de fichier spécifié par cette propriété système.</p></li><li><p>Si la propriété système « javax.net.ssl.trustStore » n'a pas été spécifiée et si le fichier « &lt;java-home&gt;/lib/security/jssecacerts » existe, ce fichier est utilisé. </p></li><li><p>Si le fichier « &lt;java-home&gt;/lib/security/cacerts » existe, il est utilisé.</p></li></ul><p>Pour plus d'informations, consultez la documentation d'interface SUNX509 TrustManager sur le site Web de Sun Microsystems.</p><p>Le Java Runtime Environment vous permet de définir les propriétés système trustStore et trustStorePassword comme suit : </p><div class="sampleCode"><span codeLanguage="other"><pre>java -Djavax.net.ssl.trustStore=C:\MyCertificates\storeName
java -Djavax.net.ssl.trustStorePassword=storePassword</pre></span></div><p>Dans ce cas, toute application qui s'exécute sur cette JVM utilisera ces paramètres comme paramètres par défaut. Pour substituer les paramètres par défaut dans votre application, vous devez définir les propriétés de connexion <span class="label">trustStore</span> et <span class="label">trustStorePassword</span> dans la chaîne de connexion ou dans la méthode d'accesseur Set appropriée de la classe <a href="097434fd-2b74-411c-a5ed-eba04481dde5.htm">SQLServerDataSource</a>.</p><p>De plus, vous pouvez configurer et gérer les fichiers de magasins d'approbations par défaut tels que « &lt;java-home&gt;/lib/security/jssecacerts » et « &lt;java-home&gt;/lib/security/cacerts ». Pour cela, utilisez l'utilitaire « keytool » JAVA installé avec le JRE (Java Runtime Environment). Pour plus d'informations sur l'utilitaire « keytool », consultez la documentation de keytool sur le site Web de Sun Microsystems.</p><h1 class="heading">Importation du certificat de serveur vers le magasin d'approbations</h1><div class="subsection"><p>Pendant la négociation SSL, le serveur envoie son certificat de clé publique au client. L'émetteur d'un certificat de clé publique porte le nom d'Autorité de certification. Le client doit s'assurer que l'autorité de certification est approuvée par le client. Il doit pour cela connaître la clé publique des autorités de certification à l'avance. Normalement, la JVM est fournie avec un jeu prédéfini d'autorités de certification approuvées. </p><p>Si l'instance du certificat SSL de SQL Server est publiée par une autorité de certification privée, vous devez ajouter le certificat de l'autorité de certification à la liste de certificats approuvés dans le magasin d'approbations de l'ordinateur client.</p><p>Pour cela, utilisez l'utilitaire « keytool » JAVA installé avec le JRE (Java Runtime Environment). L'invite de commandes suivante montre comment utiliser l'utilitaire « keytool » pour importer un certificat à partir d'un fichier :</p><div class="sampleCode"><span codeLanguage="other"><pre>keytool -import -v -trustcacerts -alias myServer -file caCert.cer -keystore truststore.ks</pre></span></div><p>L'exemple utilise un fichier nommé « caCert.cer » comme fichier de certificat. Vous devez obtenir ce fichier de certificat à partir du serveur. Les étapes suivantes expliquent comment exporter le certificat de serveur vers un fichier :</p><ol><li><p>Cliquez sur Démarrer, sur Exécuter, puis tapez MMC. (MMC signifie Microsoft Management Console.)</p></li><li><p>Dans la console MMC, ouvrez le dossier Certificats. </p></li><li><p>Développez Personnel, puis Certificats. </p></li><li><p>Cliquez avec le bouton droit sur le certificat de serveur, puis sélectionnez Toutes les tâches\Exporter. </p></li><li><p>Cliquez sur Suivant pour passer la boîte de dialogue d'accueil de l'Assistant Exportation de certificat. </p></li><li><p>Vérifiez que l'option « Non, ne pas exporter la clé privée » est sélectionnée, puis cliquez sur Suivant. </p></li><li><p>Assurez-vous que Binaire codé DER X.509 (.cer) ou Codé à base 64 X.509 (.cer) est sélectionné, puis cliquez sur Suivant. </p></li><li><p>Entrez un nom de fichier d'exportation.</p></li><li><p>Cliquez sur Suivant, puis cliquez sur Terminer pour exporter le certificat.</p></li></ol></div></div><span id="seeAlsoSpan"><h1 class="heading">Voir aussi</h1></span><div id="seeAlsoSection" class="section" name="collapseableSection" style=""><div class="seeAlsoStyle"><span sdata="link"><a href="8e566243-2f93-4b21-8065-3c8336649309.htm">Utilisation du chiffrement SSL</a></span></div><div class="seeAlsoStyle"><span sdata="link"><a href="90724ec6-a9cb-43ef-903e-793f89410bc0.htm">Sécurisation des applications de pilote JDBC</a></span></div></div></div><div id="footer" class="section"><span id="feedbackarea">Envoyez vos <a href="javascript:SubmitFeedback('DevDocs@Microsoft.com','','','','8.0.12060.10000','%0\dMerci pour vos commentaires qui permettent aux équipes chargées de rédiger la documentation développeur d\'en améliorer la qualité. Pendant la révision de vos commentaires, il est possible que nous vous contactions par courrier électronique afin de vous demander des éclaircissements ou d\'autres commentaires sur la solution envisagée. Nous n\'utilisons pas votre adresse de messagerie dans un autre but et nous la supprimons une fois notre révision terminée.%0\APour plus d\'informations sur les politiques de confidentialité de Microsoft, consultez http://privacy.microsoft.com/fr-fr/default.aspx.%0\A%0\d','Commentaires client.');">commentaires</a> sur cette rubrique à Microsoft.</span><span id="copyrightarea"><p><a href="9bad553b-9e70-4696-8499-2e35f772a1e0.htm">© 2012 Microsoft. Tous droits réservés.</a></p></span></div></div></body></html>