<html xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8" /><META NAME="save" CONTENT="history" /><title>Fonctionnement de la prise en charge SSL</title><meta name="Language" content="fr-fr" /><meta name="System.Keywords" content="chiffrement" /><meta name="System.Keywords" content="SSL" /><meta name="Microsoft.Help.Id" content="073f3b9e-8edd-4815-88ea-de0655d0325e" /><meta name="Description" content="Lors de la connexion à SQL Server, si l'application demande un chiffrement et si l'instance de SQL Server est configurée pour prendre en charge le chiffrement SSL, le Pilote JDBC Microsoft pour SQL Server initie l'établissement d'une liaison SSL." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><link rel="stylesheet" type="text/css" href="../local/Classic.css" /><script type="text/javascript" src="../scripts/EventUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/SplitScreen.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/Dropdown.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_manifold.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_feedBack.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CheckboxMenu.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CommonUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../local/script_main.js">&amp;nbsp;</script></head><body><div id="header"><table id="bottomTable" cellpadding="0" cellspacing="0"><tr><td align="left"><span id="headerBold">Fonctionnement de la prise en charge SSL</span></td></tr></table><table id="gradientTable"><tr><td class="nsrBottom" background="../icons/gradient.gif" /></tr></table></div><div id="mainSection"><div id="mainBody"><div class="introduction"><p>Lors de la connexion à SQL Server, si l'application demande un chiffrement et si l'instance de SQL Server est configurée pour prendre en charge le chiffrement SSL, le Pilote JDBC Microsoft pour SQL Server initie l'établissement d'une liaison SSL. L'établissement d'une liaison permet au serveur et au client de négocier le chiffrement et les algorithmes de chiffrement à utiliser pour protéger les données. Une fois la négociation SSL terminée, le client et le serveur peuvent envoyer les données chiffrées de manière sécurisée. Pendant la négociation SSL, le serveur envoie son certificat de clé publique au client. L'émetteur d'un certificat de clé publique porte le nom d'Autorité de certification. Le client est chargé de vérifier que l'autorité de certification est approuvée par le client.</p><p>Si l'application ne demande pas de chiffrement, le Pilote JDBC Microsoft pour SQL Server ne force pas SQL Server à prendre en charge le chiffrement SSL. Si l'instance SQL Server n'est pas configurée pour forcer le chiffrement SSL, une connexion est établie sans aucun chiffrement. Si l'instance SQL Server est configurée pour forcer le chiffrement SSL, le pilote active automatiquement le chiffrement SSL lors de l'exécution sur une machine virtuelle Java (JVM) correctement configurée, sinon la connexion est interrompue et le pilote génère une erreur.</p><div style="margin: .5em 1.5em .5em 1.5em"><b></b><p>Pour garantir une connexion SSL, assurez-vous que la valeur transmise à <span sdata="langKeyword" value="serverName"><span class="keyword">serverName</span></span> correspond exactement au nom CN (Nom commun) ou DNS dans le nom SAN (Autre nom du sujet) du certificat de serveur.</p></div><div style="margin: .5em 1.5em .5em 1.5em"><b></b><p>Pour plus d'informations sur la configuration du protocole SSL pour SQL Server, consultez la rubrique sur le chiffrement des connexions à SQL Server dans la documentation en ligne de SQL Server.</p></div></div><h1 class="heading">Notes</h1><div id="sectionSection0" class="section" name="collapseableSection" style=""><p>Pour permettre aux applications d'utiliser le chiffrement SSL, le Pilote JDBC Microsoft pour SQL Server comprend les propriétés de connexion suivantes, à partir de la version 1.2 : <span class="label">encrypt</span>, <span class="label">trustServerCertificate</span>, <span class="label">trustStore</span>, <span class="label">trustStorePassword</span> et <span class="label">hostNameInCertificate</span>. Pour plus d'informations, consultez <span sdata="link"><a href="f1b62700-f046-488d-bd6b-a5cd8fc345b7.htm">Définition des propriétés de connexion</a></span>.</p><p>Le tableau suivant résume le comportement du Pilote JDBC Microsoft pour SQL Server pour les différents scénarios de connexion SSL possibles. Chaque scénario utilise un ensemble différent de propriétés de connexion SSL. Le tableau inclut : </p><ul><li><p><span sdata="langKeyword" value="blank"><span class="keyword">blank</span></span> : « La propriété n'existe pas dans la chaîne de connexion »</p></li><li><p><span sdata="langKeyword" value="value"><span class="keyword">value</span></span> : « La propriété existe dans la chaîne de connexion et sa valeur est valide »</p></li><li><p><span sdata="langKeyword" value="any"><span class="keyword">any</span></span> : « Peu importe si la propriété existe dans la chaîne de connexion ou si sa valeur est valide »</p></li></ul><div style="margin: .5em 1.5em .5em 1.5em"><b></b><p>Le même comportement s'applique à l'authentification utilisateur SQL Server et à l'authentification intégrée Windows.</p></div><div class="tableSection"><table width="50%" cellspacing="2" cellpadding="5" frame="lhs"><tr><th><p>encrypt</p></th><th><p>trustServerCertificate</p></th><th><p>hostNameInCertificate</p></th><th><p>trustStore</p></th><th><p>trustStorePassword</p></th><th><p>Comportement</p></th></tr><tr><td><p>false ou blank</p></td><td><p>n'importe laquelle</p></td><td><p>n'importe laquelle</p></td><td><p>n'importe laquelle</p></td><td><p>n'importe laquelle</p></td><td><p>Le Pilote JDBC Microsoft pour SQL Server ne forcera pas SQL Server à prendre en charge le chiffrement SSL. Si le serveur a un certificat auto-signé, le pilote initie l'échange de certificat SSL. Le certificat SSL ne sera pas validé et seules les informations d'identification (dans le paquet de connexion) sont chiffrées.</p><p>Si le serveur requiert que le client prenne en charge le chiffrement SSL, le pilote initiera l'échange de certificat SSL. Le certificat SSL ne sera pas validé, mais la communication entière sera chiffrée.</p></td></tr><tr><td><p>true</p></td><td><p>true</p></td><td><p>n'importe laquelle</p></td><td><p>n'importe laquelle</p></td><td><p>n'importe laquelle</p></td><td><p>Le Pilote JDBC Microsoft pour SQL Server demande à utiliser le chiffrement SSL avec SQL Server. </p><p>Si le serveur requiert que le client prenne en charge le chiffrement SSL ou si le serveur prend en charge le chiffrement, le pilote initiera l'échange de certificat SSL. Notez que si la propriété <span class="label">trustServerCertificate</span> a la valeur « true », le pilote ne validera pas le certificat SSL.</p><p>Si le serveur n'est pas configuré pour prendre en charge le chiffrement, le pilote déclenchera une erreur et interrompra la connexion.</p></td></tr><tr><td><p>true</p></td><td><p>false ou blank</p></td><td><p>blank</p></td><td><p>blank</p></td><td><p>blank</p></td><td><p>Le Pilote JDBC Microsoft pour SQL Server demande à utiliser le chiffrement SSL avec SQL Server. </p><p>Si le serveur requiert que le client prenne en charge le chiffrement SSL ou si le serveur prend en charge le chiffrement, le pilote initiera l'échange de certificat SSL. </p><p>Le pilote utilisera la propriété <span class="label">serverName</span> spécifiée sur l'URL de connexion pour valider le certificat SSL de serveur et se fiera aux règles de recherche de la fabrique de gestionnaire de confiance pour déterminer le magasin de certificats à utiliser.</p><p>Si le serveur n'est pas configuré pour prendre en charge le chiffrement, le pilote déclenchera une erreur et interrompra la connexion.</p></td></tr><tr><td><p>true</p></td><td><p>false ou blank</p></td><td><p>valeur</p></td><td><p>blank</p></td><td><p>blank</p></td><td><p>Le Pilote JDBC Microsoft pour SQL Server demande à utiliser le chiffrement SSL avec SQL Server. </p><p>Si le serveur requiert que le client prenne en charge le chiffrement SSL ou si le serveur prend en charge le chiffrement, le pilote initiera l'échange de certificat SSL. </p><p>Le pilote validera la valeur de sujet du certificat SSL à l'aide de la valeur spécifiée pour la propriété <span class="label">hostNameInCertificate</span>.</p><p>Si le serveur n'est pas configuré pour prendre en charge le chiffrement, le pilote déclenchera une erreur et interrompra la connexion.</p></td></tr><tr><td><p>true</p></td><td><p>false ou blank</p></td><td><p>blank</p></td><td><p>valeur</p></td><td><p>valeur</p></td><td><p>Le Pilote JDBC Microsoft pour SQL Server demande à utiliser le chiffrement SSL avec SQL Server. </p><p>Si le serveur requiert que le client prenne en charge le chiffrement SSL ou si le serveur prend en charge le chiffrement, le pilote initiera l'échange de certificat SSL. </p><p>Le pilote utilisera la valeur de propriété <span class="label">trustStore</span> pour rechercher le fichier trustStore de certificat et la valeur de propriété <span class="label">trustStorePassword</span> pour vérifier l'intégrité du fichier trustStore.</p><p>Si le serveur n'est pas configuré pour prendre en charge le chiffrement, le pilote déclenchera une erreur et interrompra la connexion.</p></td></tr><tr><td><p>true</p></td><td><p>false ou blank</p></td><td><p>blank</p></td><td><p>blank</p></td><td><p>valeur</p></td><td><p>Le Pilote JDBC Microsoft pour SQL Server demande à utiliser le chiffrement SSL avec SQL Server.</p><p>Si le serveur requiert que le client prenne en charge le chiffrement SSL ou si le serveur prend en charge le chiffrement, le pilote initiera l'échange de certificat SSL. </p><p>Le pilote utilisera la valeur de propriété <span class="label">trustStorePassword</span> pour vérifier l'intégrité du fichier trustStore par défaut.</p><p>Si le serveur n'est pas configuré pour prendre en charge le chiffrement, le pilote déclenchera une erreur et interrompra la connexion.</p></td></tr><tr><td><p>true</p></td><td><p>false ou blank</p></td><td><p>blank</p></td><td><p>valeur</p></td><td><p>blank</p></td><td><p>Le Pilote JDBC Microsoft pour SQL Server demande à utiliser le chiffrement SSL avec SQL Server. </p><p>Si le serveur requiert que le client prenne en charge le chiffrement SSL ou si le serveur prend en charge le chiffrement, le pilote initiera l'échange de certificat SSL. </p><p>Le pilote utilisera la valeur de propriété <span class="label">trustStore</span> pour rechercher l'emplacement du fichier trustStore.</p><p>Si le serveur n'est pas configuré pour prendre en charge le chiffrement, le pilote déclenchera une erreur et interrompra la connexion.</p></td></tr><tr><td><p>true</p></td><td><p>false ou blank</p></td><td><p>valeur</p></td><td><p>blank</p></td><td><p>valeur</p></td><td><p>Le Pilote JDBC Microsoft pour SQL Server demande à utiliser le chiffrement SSL avec SQL Server. </p><p>Si le serveur requiert que le client prenne en charge le chiffrement SSL ou si le serveur prend en charge le chiffrement, le pilote initiera l'échange de certificat SSL. </p><p>Le pilote utilisera la valeur de propriété <span class="label">trustStorePassword</span> pour vérifier l'intégrité du fichier trustStore par défaut. De plus, le pilote utilisera la valeur de propriété <span class="label">hostNameInCertificate</span> pour valider le certificat SSL.</p><p>Si le serveur n'est pas configuré pour prendre en charge le chiffrement, le pilote déclenchera une erreur et interrompra la connexion.</p></td></tr><tr><td><p>true</p></td><td><p>false ou blank</p></td><td><p>valeur</p></td><td><p>valeur</p></td><td><p>blank</p></td><td><p>Le Pilote JDBC Microsoft pour SQL Server demande à utiliser le chiffrement SSL avec SQL Server. </p><p>Si le serveur requiert que le client prenne en charge le chiffrement SSL ou si le serveur prend en charge le chiffrement, le pilote initiera l'échange de certificat SSL. </p><p>Le pilote utilisera la valeur de propriété <span class="label">trustStore</span> pour rechercher l'emplacement du fichier trustStore. De plus, le pilote utilisera la valeur de propriété <span class="label">hostNameInCertificate</span> pour valider le certificat SSL.</p><p>Si le serveur n'est pas configuré pour prendre en charge le chiffrement, le pilote déclenchera une erreur et interrompra la connexion.</p></td></tr><tr><td><p>true</p></td><td><p>false ou blank</p></td><td><p>valeur</p></td><td><p>valeur</p></td><td><p>valeur</p></td><td><p>Le Pilote JDBC Microsoft pour SQL Server demande à utiliser le chiffrement SSL avec SQL Server. </p><p>Si le serveur requiert que le client prenne en charge le chiffrement SSL ou si le serveur prend en charge le chiffrement, le pilote initiera l'échange de certificat SSL. </p><p>Le pilote utilisera la valeur de propriété <span class="label">trustStore</span> pour rechercher le fichier trustStore de certificat et la valeur de propriété <span class="label">trustStorePassword</span> pour vérifier l'intégrité du fichier trustStore. De plus, le pilote utilisera la valeur de propriété <span class="label">hostNameInCertificate</span> pour valider le certificat SSL.</p><p>Si le serveur n'est pas configuré pour prendre en charge le chiffrement, le pilote déclenchera une erreur et interrompra la connexion.</p></td></tr></table></div><p>Si la propriété de chiffrement a la valeur <span sdata="langKeyword" value="true"><span class="keyword">true</span></span>, le Pilote JDBC Microsoft pour SQL Server utilise le fournisseur de sécurité JSSE par défaut de la machine virtuelle Java pour négocier le chiffrement SSL avec SQL Server. Le fournisseur de sécurité par défaut peut ne pas prendre en charge toutes les fonctionnalités requises pour négocier le chiffrement SSL avec succès. Par exemple, le fournisseur de sécurité par défaut peut ne pas prendre en charge la taille de la clé publique RSA utilisée dans le certificat SSL SQL Server. Dans ce cas, le fournisseur de sécurité par défaut peut générer une erreur qui forcera le pilote JDBC à mettre fin à la connexion. Pour résoudre ce problème, effectuez l'une des opérations suivantes :</p><ul><li><p>Configurer l'ordinateur SQL Server avec un certificat de serveur qui a une plus petite clé publique RSA</p></li><li><p>Configurer la machine virtuelle Java de façon à utiliser un autre fournisseur de sécurité JSSE dans le fichier de propriétés de sécurité « &lt;java-home&gt;/lib/security/java.security »</p></li><li><p>Utiliser une autre machine JVM</p></li></ul></div><h1 class="heading">Validation du certificat SSL de serveur</h1><div id="sectionSection1" class="section" name="collapseableSection" style=""><p>Pendant la négociation SSL, le serveur envoie son certificat de clé publique au client. Le client ou pilote JDBC doit confirmer que le certificat de serveur est publié par une autorité de certification approuvée par le client. Le pilote requiert que le certificat de serveur réponde aux conditions suivantes :</p><ul><li><p>Le certificat a été publié par une autorité de certification approuvée.</p></li><li><p>Le certificat doit être publié pour l'authentification de serveur.</p></li><li><p>Le certificat n'a pas expiré.</p></li><li><p>Le nom CN (Nom commun) du sujet ou le nom DNS du nom SAN (Autre nom du sujet) du certificat correspond exactement à la valeur <span sdata="langKeyword" value="serverName"><span class="keyword">serverName</span></span> de la chaîne de connexion, ou si elle est spécifiée, à la valeur de la propriété <span sdata="langKeyword" value="hostNameInCertificate"><span class="keyword">hostNameInCertificate</span></span>.</p></li><li><p>Un nom DNS peut comprendre des caractères génériques. En revanche, le Pilote JDBC Microsoft pour SQL Server ne prend pas en charge la correspondance générique. Par exemple, abc.com ne correspondra pas à *.com, et *.com correspondra à *.com.</p></li></ul></div><span id="seeAlsoSpan"><h1 class="heading">Voir aussi</h1></span><div id="seeAlsoSection" class="section" name="collapseableSection" style=""><div class="seeAlsoStyle"><span sdata="link"><a href="8e566243-2f93-4b21-8065-3c8336649309.htm">Utilisation du chiffrement SSL</a></span></div><div class="seeAlsoStyle"><span sdata="link"><a href="90724ec6-a9cb-43ef-903e-793f89410bc0.htm">Sécurisation des applications de pilote JDBC</a></span></div></div></div><div id="footer" class="section"><span id="feedbackarea">Envoyez vos <a href="javascript:SubmitFeedback('DevDocs@Microsoft.com','','','','8.0.12060.10000','%0\dMerci pour vos commentaires qui permettent aux équipes chargées de rédiger la documentation développeur d\'en améliorer la qualité. Pendant la révision de vos commentaires, il est possible que nous vous contactions par courrier électronique afin de vous demander des éclaircissements ou d\'autres commentaires sur la solution envisagée. Nous n\'utilisons pas votre adresse de messagerie dans un autre but et nous la supprimons une fois notre révision terminée.%0\APour plus d\'informations sur les politiques de confidentialité de Microsoft, consultez http://privacy.microsoft.com/fr-fr/default.aspx.%0\A%0\d','Commentaires client.');">commentaires</a> sur cette rubrique à Microsoft.</span><span id="copyrightarea"><p><a href="9bad553b-9e70-4696-8499-2e35f772a1e0.htm">© 2012 Microsoft. Tous droits réservés.</a></p></span></div></div></body></html>